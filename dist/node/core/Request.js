'use strict';var a14_0x47c3=['redirect_uri','ALGORITHMS','setKeys','1382051PvNHwF','__awaiter','value','__importDefault','kty','__setModuleDefault','response_type','publicKey','./ErrorResponse','jwks_uri','length','refresh_token','openid://','getKey','NO_MATCHING_KEY','resolve','sent','create','split','authorization_code','ERROR_RESPONSES','did_authn','./Identity','then','DidSiopRequest','kid','function','grant_type','pop','stringifyUrl','toJWK','parse','1OQdWsc','./JWKUtils','openid','client_id','extractAuthenticationKeys','__createBinding','__esModule','next','ops','3527ufgblB','invalid_request_object','id_token','alg','checkErrorResponse','toString','return','registration','222894FjOCeS','idToken','./JWT','__assign','openid\x20did_authn','unsupported_response_type','jwks','push','includes','parseUrl','424NfafCH','every','2078382PsNVPy','generateRequest','request','call','reject','1190866xVlLHV','data','base64url','defineProperty','decode','apply','sign','invalid_request',';transform-keys=jwks','PKCS1_PEM','trys','KTYS','label','./config','invalid_request_uri','hasOwnProperty','code','query','format','err','JWT','request_uri','RESOLVER_URL','__generator','indexOf','query-string','default','327258VxzDCk','exportKey','scope','__importStar','find','HEX','./globals','assign','iss','did','done','prototype','url','327401UIIGWu','get','KEY_FORMATS','ERRORS','validateRequest','match','OKP'];var a14_0x5469=function(_0x12900d,_0x26bf84){_0x12900d=_0x12900d-0x1d7;var _0x47c317=a14_0x47c3[_0x12900d];return _0x47c317;};var a14_0x1578d3=a14_0x5469;(function(_0x2ade9c,_0x3710e2){var _0x5b64f8=a14_0x5469;while(!![]){try{var _0x154137=-parseInt(_0x5b64f8(0x1e6))*parseInt(_0x5b64f8(0x210))+-parseInt(_0x5b64f8(0x221))+parseInt(_0x5b64f8(0x1d9))+-parseInt(_0x5b64f8(0x1f0))+-parseInt(_0x5b64f8(0x232))+parseInt(_0x5b64f8(0x219))*parseInt(_0x5b64f8(0x22b))+parseInt(_0x5b64f8(0x22d));if(_0x154137===_0x3710e2)break;else _0x2ade9c['push'](_0x2ade9c['shift']());}catch(_0x5d34c0){_0x2ade9c['push'](_0x2ade9c['shift']());}}}(a14_0x47c3,0xbde94));var __assign=this&&this[a14_0x1578d3(0x224)]||function(){var _0x48ab96=a14_0x1578d3;return __assign=Object[_0x48ab96(0x1e0)]||function(_0x29e7ef){var _0x39dfc8=_0x48ab96;for(var _0x18cd5c,_0x5079fe=0x1,_0x203fbe=arguments[_0x39dfc8(0x1fa)];_0x5079fe<_0x203fbe;_0x5079fe++){_0x18cd5c=arguments[_0x5079fe];for(var _0x399bb5 in _0x18cd5c)if(Object[_0x39dfc8(0x1e4)]['hasOwnProperty'][_0x39dfc8(0x230)](_0x18cd5c,_0x399bb5))_0x29e7ef[_0x399bb5]=_0x18cd5c[_0x399bb5];}return _0x29e7ef;},__assign[_0x48ab96(0x237)](this,arguments);},__createBinding=this&&this[a14_0x1578d3(0x215)]||(Object[a14_0x1578d3(0x201)]?function(_0x389f39,_0x3ffb84,_0x532a1b,_0x3a27e3){var _0x1b776c=a14_0x1578d3;if(_0x3a27e3===undefined)_0x3a27e3=_0x532a1b;Object[_0x1b776c(0x235)](_0x389f39,_0x3a27e3,{'enumerable':!![],'get':function(){return _0x3ffb84[_0x532a1b];}});}:function(_0x3d1cca,_0x574ff4,_0x33bf7c,_0x1c44b5){if(_0x1c44b5===undefined)_0x1c44b5=_0x33bf7c;_0x3d1cca[_0x1c44b5]=_0x574ff4[_0x33bf7c];}),__setModuleDefault=this&&this[a14_0x1578d3(0x1f5)]||(Object[a14_0x1578d3(0x201)]?function(_0x5c5159,_0x2997c6){var _0x171352=a14_0x1578d3;Object['defineProperty'](_0x5c5159,_0x171352(0x1d8),{'enumerable':!![],'value':_0x2997c6});}:function(_0x6bdd7c,_0x3a3623){_0x6bdd7c['default']=_0x3a3623;}),__importStar=this&&this[a14_0x1578d3(0x1dc)]||function(_0x4f678b){var _0x104f96=a14_0x1578d3;if(_0x4f678b&&_0x4f678b[_0x104f96(0x216)])return _0x4f678b;var _0xf282f9={};if(_0x4f678b!=null){for(var _0x51608b in _0x4f678b)if(_0x51608b!==_0x104f96(0x1d8)&&Object[_0x104f96(0x241)][_0x104f96(0x230)](_0x4f678b,_0x51608b))__createBinding(_0xf282f9,_0x4f678b,_0x51608b);}return __setModuleDefault(_0xf282f9,_0x4f678b),_0xf282f9;},__awaiter=this&&this[a14_0x1578d3(0x1f1)]||function(_0x454f39,_0x5ba3e0,_0x984f75,_0x4f9720){function _0x20e445(_0x14c092){return _0x14c092 instanceof _0x984f75?_0x14c092:new _0x984f75(function(_0x54489b){_0x54489b(_0x14c092);});}return new(_0x984f75||(_0x984f75=Promise))(function(_0x244fa8,_0x30ed85){var _0x4f0f5a=a14_0x5469;function _0x1f9029(_0x1e354c){var _0xa84f97=a14_0x5469;try{_0x9aec7c(_0x4f9720[_0xa84f97(0x217)](_0x1e354c));}catch(_0x2544fd){_0x30ed85(_0x2544fd);}}function _0x123e05(_0x317d81){try{_0x9aec7c(_0x4f9720['throw'](_0x317d81));}catch(_0x1a8b34){_0x30ed85(_0x1a8b34);}}function _0x9aec7c(_0x18f703){var _0x4a40e6=a14_0x5469;_0x18f703[_0x4a40e6(0x1e3)]?_0x244fa8(_0x18f703['value']):_0x20e445(_0x18f703['value'])[_0x4a40e6(0x207)](_0x1f9029,_0x123e05);}_0x9aec7c((_0x4f9720=_0x4f9720[_0x4f0f5a(0x237)](_0x454f39,_0x5ba3e0||[]))[_0x4f0f5a(0x217)]());});},__generator=this&&this[a14_0x1578d3(0x249)]||function(_0x4e342c,_0x52af8e){var _0x2d7928=a14_0x1578d3,_0x8cf322={'label':0x0,'sent':function(){if(_0x482801[0x0]&0x1)throw _0x482801[0x1];return _0x482801[0x1];},'trys':[],'ops':[]},_0x3f7633,_0x26edf4,_0x482801,_0x1184d8;return _0x1184d8={'next':_0x211b37(0x0),'throw':_0x211b37(0x1),'return':_0x211b37(0x2)},typeof Symbol===_0x2d7928(0x20a)&&(_0x1184d8[Symbol['iterator']]=function(){return this;}),_0x1184d8;function _0x211b37(_0x1a09d6){return function(_0x15c71e){return _0xfc2aed([_0x1a09d6,_0x15c71e]);};}function _0xfc2aed(_0x511930){var _0x3eb3c2=_0x2d7928;if(_0x3f7633)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x8cf322)try{if(_0x3f7633=0x1,_0x26edf4&&(_0x482801=_0x511930[0x0]&0x2?_0x26edf4['return']:_0x511930[0x0]?_0x26edf4['throw']||((_0x482801=_0x26edf4[_0x3eb3c2(0x21f)])&&_0x482801[_0x3eb3c2(0x230)](_0x26edf4),0x0):_0x26edf4[_0x3eb3c2(0x217)])&&!(_0x482801=_0x482801[_0x3eb3c2(0x230)](_0x26edf4,_0x511930[0x1]))[_0x3eb3c2(0x1e3)])return _0x482801;if(_0x26edf4=0x0,_0x482801)_0x511930=[_0x511930[0x0]&0x2,_0x482801[_0x3eb3c2(0x1f2)]];switch(_0x511930[0x0]){case 0x0:case 0x1:_0x482801=_0x511930;break;case 0x4:_0x8cf322[_0x3eb3c2(0x23e)]++;return{'value':_0x511930[0x1],'done':![]};case 0x5:_0x8cf322[_0x3eb3c2(0x23e)]++,_0x26edf4=_0x511930[0x1],_0x511930=[0x0];continue;case 0x7:_0x511930=_0x8cf322[_0x3eb3c2(0x218)][_0x3eb3c2(0x20c)](),_0x8cf322[_0x3eb3c2(0x23c)][_0x3eb3c2(0x20c)]();continue;default:if(!(_0x482801=_0x8cf322[_0x3eb3c2(0x23c)],_0x482801=_0x482801['length']>0x0&&_0x482801[_0x482801[_0x3eb3c2(0x1fa)]-0x1])&&(_0x511930[0x0]===0x6||_0x511930[0x0]===0x2)){_0x8cf322=0x0;continue;}if(_0x511930[0x0]===0x3&&(!_0x482801||_0x511930[0x1]>_0x482801[0x0]&&_0x511930[0x1]<_0x482801[0x3])){_0x8cf322[_0x3eb3c2(0x23e)]=_0x511930[0x1];break;}if(_0x511930[0x0]===0x6&&_0x8cf322[_0x3eb3c2(0x23e)]<_0x482801[0x1]){_0x8cf322[_0x3eb3c2(0x23e)]=_0x482801[0x1],_0x482801=_0x511930;break;}if(_0x482801&&_0x8cf322['label']<_0x482801[0x2]){_0x8cf322[_0x3eb3c2(0x23e)]=_0x482801[0x2],_0x8cf322[_0x3eb3c2(0x218)]['push'](_0x511930);break;}if(_0x482801[0x2])_0x8cf322[_0x3eb3c2(0x218)][_0x3eb3c2(0x20c)]();_0x8cf322[_0x3eb3c2(0x23c)][_0x3eb3c2(0x20c)]();continue;}_0x511930=_0x52af8e[_0x3eb3c2(0x230)](_0x4e342c,_0x8cf322);}catch(_0x5b0377){_0x511930=[0x6,_0x5b0377],_0x26edf4=0x0;}finally{_0x3f7633=_0x482801=0x0;}if(_0x511930[0x0]&0x5)throw _0x511930[0x1];return{'value':_0x511930[0x0]?_0x511930[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a14_0x1578d3(0x1f3)]||function(_0x40b7ab){var _0x5abe56=a14_0x1578d3;return _0x40b7ab&&_0x40b7ab[_0x5abe56(0x216)]?_0x40b7ab:{'default':_0x40b7ab};};Object[a14_0x1578d3(0x235)](exports,a14_0x1578d3(0x216),{'value':!![]}),exports[a14_0x1578d3(0x208)]=void 0x0;var config_1=require(a14_0x1578d3(0x23f)),Identity_1=require(a14_0x1578d3(0x206)),queryString=__importStar(require(a14_0x1578d3(0x1d7))),ErrorResponse_1=require(a14_0x1578d3(0x1f8)),base64url_1=__importDefault(require(a14_0x1578d3(0x234))),JWKUtils_1=require(a14_0x1578d3(0x211)),globals_1=require(a14_0x1578d3(0x1df)),JWT=__importStar(require(a14_0x1578d3(0x223))),ErrorResponse=__importStar(require(a14_0x1578d3(0x1f8))),axios=require('axios')[a14_0x1578d3(0x1d8)],RESPONSE_TYPES=[a14_0x1578d3(0x21b),a14_0x1578d3(0x242),'refresh_token'],SUPPORTED_SCOPES=[a14_0x1578d3(0x212),'did_authn'],REQUIRED_SCOPES=[a14_0x1578d3(0x212),a14_0x1578d3(0x205)],DidSiopRequest=function(){var _0x3c16f5=a14_0x1578d3;function _0x528184(){}return _0x528184[_0x3c16f5(0x1ea)]=function(_0x12c4e4){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1ee83e,_0x169885,_0x297196,_0x55365f,_0x24c99b,_0x5f52cf;return __generator(this,function(_0x1ef16e){var _0x2d21e5=a14_0x5469;switch(_0x1ef16e[_0x2d21e5(0x23e)]){case 0x0:return[0x4,validateRequestParams(_0x12c4e4)];case 0x1:_0x1ee83e=_0x1ef16e[_0x2d21e5(0x200)]();if(!(_0x1ee83e['grantType']===_0x2d21e5(0x1fb)))return[0x3,0x2];_0x169885=_0x1ee83e[_0x2d21e5(0x222)],_0x297196=void 0x0,_0x55365f=void 0x0;try{_0x24c99b=ErrorResponse[_0x2d21e5(0x21d)](_0x169885);if(_0x24c99b)return[0x2,_0x24c99b];_0x297196=JSON[_0x2d21e5(0x20f)](base64url_1[_0x2d21e5(0x1d8)][_0x2d21e5(0x236)](_0x169885[_0x2d21e5(0x202)]('.')[0x0])),_0x55365f=JSON[_0x2d21e5(0x20f)](base64url_1[_0x2d21e5(0x1d8)][_0x2d21e5(0x236)](_0x169885['split']('.')[0x1]));}catch(_0x435acd){return[0x2,Promise[_0x2d21e5(0x231)](_0x435acd)];}return[0x2,{'header':_0x297196,'payload':_0x55365f}];case 0x2:return[0x4,validateRequestJWT(_0x1ee83e[_0x2d21e5(0x22f)])];case 0x3:_0x5f52cf=_0x1ef16e[_0x2d21e5(0x200)]();return[0x2,_0x5f52cf];}});});},_0x528184[_0x3c16f5(0x22e)]=function(_0xb0445f,_0x562e7e,_0x483e61,_0x25b3ed){return __awaiter(this,void 0x0,void 0x0,function(){var _0x48d0bf,_0x5aca34,_0x43a919,_0x70f333,_0x139ceb,_0x4ec6a5;return __generator(this,function(_0x4bc463){var _0xf5a72b=a14_0x5469;return _0x48d0bf=_0xf5a72b(0x1fc),_0x5aca34=__assign({'response_type':_0x25b3ed[_0xf5a72b(0x1f6)]===_0xf5a72b(0x242)||_0x25b3ed[_0xf5a72b(0x1f6)]===_0xf5a72b(0x21b)?_0x25b3ed[_0xf5a72b(0x1f6)]:_0xf5a72b(0x21b),'client_id':_0xb0445f['redirect_uri'],'scope':_0xf5a72b(0x225)},_0x483e61),_0xb0445f['request_uri']?_0x5aca34[_0xf5a72b(0x247)]=_0xb0445f['request_uri']:(_0x43a919={'alg':globals_1[_0xf5a72b(0x1ee)][_0x562e7e[_0xf5a72b(0x21c)]],'typ':_0xf5a72b(0x246),'kid':_0x562e7e[_0xf5a72b(0x209)]},_0x70f333=__assign(__assign({'iss':_0xb0445f[_0xf5a72b(0x1e2)],'scope':_0xf5a72b(0x225),'client_id':_0xb0445f[_0xf5a72b(0x1ed)],'registration':_0xb0445f[_0xf5a72b(0x220)]},_0x25b3ed),{'response_type':_0x25b3ed['response_type']===_0xf5a72b(0x242)||_0x25b3ed[_0xf5a72b(0x1f6)]===_0xf5a72b(0x21b)?_0x25b3ed[_0xf5a72b(0x1f6)]:_0xf5a72b(0x21b)}),_0x139ceb={'header':_0x43a919,'payload':_0x70f333},_0x4ec6a5=JWT[_0xf5a72b(0x238)](_0x139ceb,_0x562e7e),_0x5aca34[_0xf5a72b(0x22f)]=_0x4ec6a5),[0x2,queryString[_0xf5a72b(0x20d)]({'url':_0x48d0bf,'query':_0x5aca34})];});});},_0x528184;}();exports[a14_0x1578d3(0x208)]=DidSiopRequest;function validateRequestParams(_0x411794){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2749ab,_0x20f130,_0x282da7,_0x5c0195;return __generator(this,function(_0x197fe3){var _0x5967d8=a14_0x5469;switch(_0x197fe3[_0x5967d8(0x23e)]){case 0x0:_0x2749ab=queryString[_0x5967d8(0x22a)](_0x411794);if(_0x2749ab[_0x5967d8(0x1e5)]!=='openid://'||(!_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x213)]||_0x2749ab[_0x5967d8(0x243)]['client_id'][_0x5967d8(0x21e)]()[_0x5967d8(0x1eb)](/^ *$/))||(!_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1f6)]||_0x2749ab[_0x5967d8(0x243)]['response_type'][_0x5967d8(0x21e)]()['match'](/^ *$/)))return[0x2,Promise['reject'](ErrorResponse_1['ERROR_RESPONSES'][_0x5967d8(0x239)][_0x5967d8(0x245)])];if(!(_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1f6)]===_0x5967d8(0x21b)&&_0x2749ab['query'][_0x5967d8(0x20b)]==='refresh_token'))return[0x3,0x1];return!_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x21b)]||_0x2749ab['query']['id_token'][_0x5967d8(0x21e)]()[_0x5967d8(0x1eb)](/^ *$/)||(!_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1fb)]||_0x2749ab['query'][_0x5967d8(0x1fb)][_0x5967d8(0x21e)]()[_0x5967d8(0x1eb)](/^ *$/))?[0x2,Promise[_0x5967d8(0x231)](ErrorResponse_1['ERROR_RESPONSES'][_0x5967d8(0x239)][_0x5967d8(0x245)])]:[0x2,{'refreshToken':_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1fb)][_0x5967d8(0x21e)](),'idToken':_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x21b)][_0x5967d8(0x21e)](),'grantType':_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x20b)]}];return[0x3,0x8];case 0x1:if(_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1db)]){_0x20f130=_0x2749ab[_0x5967d8(0x243)]['scope']['toString']()[_0x5967d8(0x202)]('\x20');if(!_0x20f130[_0x5967d8(0x22c)](function(_0x1dd322){var _0xa245b1=_0x5967d8;return SUPPORTED_SCOPES[_0xa245b1(0x229)](_0x1dd322);})||!REQUIRED_SCOPES[_0x5967d8(0x22c)](function(_0x57f09d){return _0x20f130['includes'](_0x57f09d);}))return[0x2,Promise[_0x5967d8(0x231)](ErrorResponse_1[_0x5967d8(0x204)]['invalid_scope'][_0x5967d8(0x245)])];}else return[0x2,Promise['reject'](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x239)][_0x5967d8(0x245)])];if(!RESPONSE_TYPES[_0x5967d8(0x229)](_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x1f6)][_0x5967d8(0x21e)]()))return[0x2,Promise['reject'](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x226)][_0x5967d8(0x245)])];if(_0x2749ab[_0x5967d8(0x243)]['response_type']==='id_token'&&_0x2749ab[_0x5967d8(0x243)]['grant_type']===_0x5967d8(0x203)){if(!_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x242)])return[0x2,Promise['reject'](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x239)][_0x5967d8(0x245)])];}if(!(_0x2749ab['query']['request']===undefined||_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x22f)]===null))return[0x3,0x7];if(!(_0x2749ab[_0x5967d8(0x243)]['request_uri']===undefined||_0x2749ab[_0x5967d8(0x243)]['request_uri']===null))return[0x3,0x2];return[0x2,Promise['reject'](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x239)][_0x5967d8(0x245)])];case 0x2:if(_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x247)][_0x5967d8(0x21e)]()[_0x5967d8(0x1eb)](/^ *$/))return[0x2,Promise[_0x5967d8(0x231)](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x240)][_0x5967d8(0x245)])];_0x197fe3[_0x5967d8(0x23e)]=0x3;case 0x3:_0x197fe3[_0x5967d8(0x23c)][_0x5967d8(0x228)]([0x3,0x5,,0x6]);return[0x4,axios[_0x5967d8(0x1e7)](_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x247)])];case 0x4:_0x282da7=_0x197fe3[_0x5967d8(0x200)]();return[0x2,_0x282da7[_0x5967d8(0x233)]?_0x282da7['data']:Promise[_0x5967d8(0x231)](ErrorResponse_1['ERROR_RESPONSES'][_0x5967d8(0x240)][_0x5967d8(0x245)])];case 0x5:_0x5c0195=_0x197fe3[_0x5967d8(0x200)]();return[0x2,Promise[_0x5967d8(0x231)](ErrorResponse_1[_0x5967d8(0x204)][_0x5967d8(0x240)][_0x5967d8(0x245)])];case 0x6:return[0x3,0x8];case 0x7:if(_0x2749ab[_0x5967d8(0x243)][_0x5967d8(0x22f)][_0x5967d8(0x21e)]()[_0x5967d8(0x1eb)](/^ *$/))return[0x2,Promise[_0x5967d8(0x231)](ErrorResponse_1['ERROR_RESPONSES']['invalid_request_object'][_0x5967d8(0x245)])];return[0x2,{'request':_0x2749ab['query'][_0x5967d8(0x22f)][_0x5967d8(0x21e)](),'grantType':_0x2749ab['query']['grant_type']}];case 0x8:return[0x2];}});});}function validateRequestJWT(_0xf306a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x311597,_0x1b4507,_0x41a2c1,_0x29d6e4,_0x4b3006,_0x5575e8,_0x1a88f0,_0x1a4cc9,_0x3c3341,_0x11e181;return __generator(this,function(_0x338ee3){var _0x58200f=a14_0x5469;switch(_0x338ee3[_0x58200f(0x23e)]){case 0x0:try{_0x311597=JSON[_0x58200f(0x20f)](base64url_1['default'][_0x58200f(0x236)](_0xf306a[_0x58200f(0x202)]('.')[0x0])),_0x1b4507=JSON[_0x58200f(0x20f)](base64url_1[_0x58200f(0x1d8)]['decode'](_0xf306a[_0x58200f(0x202)]('.')[0x1]));}catch(_0x5b511b){return[0x2,Promise[_0x58200f(0x231)](ErrorResponse_1[_0x58200f(0x204)][_0x58200f(0x21a)][_0x58200f(0x245)])];}if(!(_0x311597[_0x58200f(0x209)]&&!_0x311597[_0x58200f(0x209)][_0x58200f(0x1eb)](/^ *$/)&&(_0x311597[_0x58200f(0x21c)]&&!_0x311597['alg']['match'](/^ *$/))&&(_0x1b4507[_0x58200f(0x1e1)]&&!_0x1b4507['iss'][_0x58200f(0x1eb)](/^ *$/))&&(_0x1b4507[_0x58200f(0x1db)]&&_0x1b4507[_0x58200f(0x1db)][_0x58200f(0x24a)]('did_authn')>-0x1)&&(_0x1b4507['registration']&&!JSON['stringify'](_0x1b4507[_0x58200f(0x220)])[_0x58200f(0x1eb)](/^ *$/))))return[0x3,0x5];_0x41a2c1=void 0x0,_0x338ee3[_0x58200f(0x23e)]=0x1;case 0x1:_0x338ee3[_0x58200f(0x23c)][_0x58200f(0x228)]([0x1,0x3,,0x4]),_0x29d6e4=new Identity_1['Identity']();return[0x4,_0x29d6e4[_0x58200f(0x1ff)](_0x1b4507['iss'])];case 0x2:_0x338ee3[_0x58200f(0x200)](),_0x4b3006=_0x29d6e4[_0x58200f(0x214)]()[_0x58200f(0x1dd)](function(_0x59e722){return _0x59e722['id']===_0x311597['kid'];});if(_0x4b3006&&globals_1[_0x58200f(0x1ee)][_0x4b3006[_0x58200f(0x21c)]]===_0x311597['alg'])_0x41a2c1={'key':_0x4b3006[_0x58200f(0x1f7)],'kid':_0x4b3006['id'],'alg':_0x4b3006[_0x58200f(0x21c)],'format':_0x4b3006[_0x58200f(0x244)]};else throw new Error(JWKUtils_1[_0x58200f(0x1e9)][_0x58200f(0x1fe)]);return[0x3,0x4];case 0x3:_0x5575e8=_0x338ee3[_0x58200f(0x200)]();try{_0x1a88f0=new JWKUtils_1['KeySet']();if(_0x1b4507[_0x58200f(0x227)])_0x1a88f0[_0x58200f(0x1ef)](_0x1b4507['jwks']);else _0x1b4507[_0x58200f(0x1f9)]&&_0x1b4507[_0x58200f(0x1f9)]===config_1[_0x58200f(0x248)]+_0x1b4507[_0x58200f(0x1e1)]+_0x58200f(0x23a)&&_0x1a88f0['setURI'](_0x1b4507[_0x58200f(0x1f9)]);_0x1a4cc9=_0x1a88f0[_0x58200f(0x1fd)](_0x1b4507['kid'])[0x0],_0x3c3341=void 0x0;switch(_0x1a4cc9[_0x58200f(0x20e)]()[_0x58200f(0x1f4)]){case globals_1[_0x58200f(0x23d)][globals_1[_0x58200f(0x23d)]['RSA']]:{_0x3c3341=globals_1[_0x58200f(0x1e8)][_0x58200f(0x23b)];break;}case globals_1[_0x58200f(0x23d)][globals_1[_0x58200f(0x23d)]['EC']]:case globals_1[_0x58200f(0x23d)][globals_1['KTYS'][_0x58200f(0x1ec)]]:{_0x3c3341=globals_1[_0x58200f(0x1e8)][_0x58200f(0x1de)];break;}default:_0x3c3341=globals_1[_0x58200f(0x1e8)][_0x58200f(0x1de)];}_0x41a2c1={'key':_0x1a4cc9[_0x58200f(0x1da)](_0x3c3341),'kid':_0x1a4cc9['toJWK']()[_0x58200f(0x209)],'alg':globals_1[_0x58200f(0x1ee)][_0x311597[_0x58200f(0x21c)]],'format':_0x3c3341};}catch(_0x321f87){_0x41a2c1=undefined;}return[0x3,0x4];case 0x4:if(_0x41a2c1){_0x11e181=![];try{_0x11e181=JWT['verify'](_0xf306a,_0x41a2c1);}catch(_0x45f160){return[0x2,Promise[_0x58200f(0x231)](ErrorResponse_1[_0x58200f(0x204)][_0x58200f(0x21a)][_0x58200f(0x245)])];}return _0x11e181?[0x2,{'header':_0x311597,'payload':_0x1b4507}]:[0x2,Promise[_0x58200f(0x231)](ErrorResponse_1[_0x58200f(0x204)][_0x58200f(0x21a)][_0x58200f(0x245)])];}else return[0x2,Promise['reject'](ErrorResponse_1['ERROR_RESPONSES'][_0x58200f(0x21a)]['err'])];return[0x3,0x6];case 0x5:return[0x2,Promise[_0x58200f(0x231)](ErrorResponse_1[_0x58200f(0x204)]['invalid_request_object'][_0x58200f(0x245)])];case 0x6:return[0x2];}});});}