'use strict';var a13_0x8437=['setUser','kty','setStorage','DidSiopResponse','call','done','label','RSA','kid','143427YoyFMN','storage','./Response','416iMPXFZ','create','value','crypto','extractAuthenticationKeys','Provider','./Verifiers','filter','OKPSigner','3niqJzy','alg','hasOwnProperty','format','validateRequest','ERRORS','function','identity','RSAKey','pop','__esModule','__awaiter','resolve','defineProperty','floor','__importStar','default','427198EzIzKH','length','RSASigner','653918yNpPzi','DidSiopRequest','./Storage','iterator','NO_PUBLIC_KEY','Crypto','generateResponse','return','./Request','ALGORITHMS','1844oGAOBM','prototype','77260ZGRCxi','removeSigningParams','KEY_FORMATS','527185ECleTZ','sent','fromKey','178137RiiAVU','__generator','OKP','push','signing_info_set','ECKey','KTYS','generateErrorResponse','apply','reject','Identity','ETHEREUM_ADDRESS','ES256KRecoverableVerifier','No\x20public\x20key\x20matches\x20given\x20private\x20key','init','addSigningParams','./globals','publicKey','setDocument','ES256KRecoverableSigner','next','./Identity','11oHUVjE','RSAVerifier','./Utils','throw','ops','__setModuleDefault','trys','sig','random','./ErrorResponse'];var a13_0x1502=function(_0x405e23,_0x510f82){_0x405e23=_0x405e23-0x148;var _0x84377d=a13_0x8437[_0x405e23];return _0x84377d;};var a13_0x5cc79c=a13_0x1502;(function(_0x4e5925,_0x6451ac){var _0x2ae284=a13_0x1502;while(!![]){try{var _0x2643fa=parseInt(_0x2ae284(0x17f))*-parseInt(_0x2ae284(0x158))+parseInt(_0x2ae284(0x175))+-parseInt(_0x2ae284(0x161))*parseInt(_0x2ae284(0x155))+-parseInt(_0x2ae284(0x172))+-parseInt(_0x2ae284(0x181))+-parseInt(_0x2ae284(0x184))+-parseInt(_0x2ae284(0x187))*-parseInt(_0x2ae284(0x19d));if(_0x2643fa===_0x6451ac)break;else _0x4e5925['push'](_0x4e5925['shift']());}catch(_0x4a2c32){_0x4e5925['push'](_0x4e5925['shift']());}}}(a13_0x8437,0x5dd8d));var __createBinding=this&&this['__createBinding']||(Object[a13_0x5cc79c(0x159)]?function(_0x2de43a,_0x2ca699,_0x924380,_0x5c4bcc){if(_0x5c4bcc===undefined)_0x5c4bcc=_0x924380;Object['defineProperty'](_0x2de43a,_0x5c4bcc,{'enumerable':!![],'get':function(){return _0x2ca699[_0x924380];}});}:function(_0x470d75,_0x210807,_0x4cebfb,_0x2eeb42){if(_0x2eeb42===undefined)_0x2eeb42=_0x4cebfb;_0x470d75[_0x2eeb42]=_0x210807[_0x4cebfb];}),__setModuleDefault=this&&this[a13_0x5cc79c(0x1a2)]||(Object['create']?function(_0x1e89b0,_0x3ac96c){var _0x5e7c09=a13_0x5cc79c;Object[_0x5e7c09(0x16e)](_0x1e89b0,_0x5e7c09(0x171),{'enumerable':!![],'value':_0x3ac96c});}:function(_0x4f663c,_0x5dd60d){var _0x1df9b1=a13_0x5cc79c;_0x4f663c[_0x1df9b1(0x171)]=_0x5dd60d;}),__importStar=this&&this[a13_0x5cc79c(0x170)]||function(_0xbcb1c5){var _0x224dae=a13_0x5cc79c;if(_0xbcb1c5&&_0xbcb1c5[_0x224dae(0x16b)])return _0xbcb1c5;var _0x295328={};if(_0xbcb1c5!=null){for(var _0x435961 in _0xbcb1c5)if(_0x435961!==_0x224dae(0x171)&&Object[_0x224dae(0x163)][_0x224dae(0x150)](_0xbcb1c5,_0x435961))__createBinding(_0x295328,_0xbcb1c5,_0x435961);}return __setModuleDefault(_0x295328,_0xbcb1c5),_0x295328;},__awaiter=this&&this[a13_0x5cc79c(0x16c)]||function(_0x358769,_0xf238a6,_0x3028d2,_0x5822d6){function _0xde03c6(_0x403478){return _0x403478 instanceof _0x3028d2?_0x403478:new _0x3028d2(function(_0x4d1950){_0x4d1950(_0x403478);});}return new(_0x3028d2||(_0x3028d2=Promise))(function(_0x45ef5f,_0x2fbe35){var _0xe1f17c=a13_0x1502;function _0x3bf178(_0x85d53b){var _0x5d2283=a13_0x1502;try{_0x5ee5c6(_0x5822d6[_0x5d2283(0x19b)](_0x85d53b));}catch(_0x23187){_0x2fbe35(_0x23187);}}function _0x35313d(_0x3460f4){var _0x42d777=a13_0x1502;try{_0x5ee5c6(_0x5822d6[_0x42d777(0x1a0)](_0x3460f4));}catch(_0x56c6de){_0x2fbe35(_0x56c6de);}}function _0x5ee5c6(_0x430104){var _0x3ffe5c=a13_0x1502;_0x430104[_0x3ffe5c(0x151)]?_0x45ef5f(_0x430104[_0x3ffe5c(0x15a)]):_0xde03c6(_0x430104[_0x3ffe5c(0x15a)])['then'](_0x3bf178,_0x35313d);}_0x5ee5c6((_0x5822d6=_0x5822d6[_0xe1f17c(0x18f)](_0x358769,_0xf238a6||[]))[_0xe1f17c(0x19b)]());});},__generator=this&&this[a13_0x5cc79c(0x188)]||function(_0x47a28f,_0x4b95dd){var _0x77e1d5=a13_0x5cc79c,_0x263a88={'label':0x0,'sent':function(){if(_0x45eefe[0x0]&0x1)throw _0x45eefe[0x1];return _0x45eefe[0x1];},'trys':[],'ops':[]},_0x4d4f17,_0x6d723d,_0x45eefe,_0x2821f6;return _0x2821f6={'next':_0xa0196e(0x0),'throw':_0xa0196e(0x1),'return':_0xa0196e(0x2)},typeof Symbol===_0x77e1d5(0x167)&&(_0x2821f6[Symbol[_0x77e1d5(0x178)]]=function(){return this;}),_0x2821f6;function _0xa0196e(_0x3be648){return function(_0x2ae848){return _0x15d6da([_0x3be648,_0x2ae848]);};}function _0x15d6da(_0x549b38){var _0x225daa=_0x77e1d5;if(_0x4d4f17)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x263a88)try{if(_0x4d4f17=0x1,_0x6d723d&&(_0x45eefe=_0x549b38[0x0]&0x2?_0x6d723d[_0x225daa(0x17c)]:_0x549b38[0x0]?_0x6d723d[_0x225daa(0x1a0)]||((_0x45eefe=_0x6d723d[_0x225daa(0x17c)])&&_0x45eefe[_0x225daa(0x150)](_0x6d723d),0x0):_0x6d723d[_0x225daa(0x19b)])&&!(_0x45eefe=_0x45eefe['call'](_0x6d723d,_0x549b38[0x1]))['done'])return _0x45eefe;if(_0x6d723d=0x0,_0x45eefe)_0x549b38=[_0x549b38[0x0]&0x2,_0x45eefe[_0x225daa(0x15a)]];switch(_0x549b38[0x0]){case 0x0:case 0x1:_0x45eefe=_0x549b38;break;case 0x4:_0x263a88[_0x225daa(0x152)]++;return{'value':_0x549b38[0x1],'done':![]};case 0x5:_0x263a88['label']++,_0x6d723d=_0x549b38[0x1],_0x549b38=[0x0];continue;case 0x7:_0x549b38=_0x263a88[_0x225daa(0x1a1)][_0x225daa(0x16a)](),_0x263a88['trys'][_0x225daa(0x16a)]();continue;default:if(!(_0x45eefe=_0x263a88['trys'],_0x45eefe=_0x45eefe[_0x225daa(0x173)]>0x0&&_0x45eefe[_0x45eefe[_0x225daa(0x173)]-0x1])&&(_0x549b38[0x0]===0x6||_0x549b38[0x0]===0x2)){_0x263a88=0x0;continue;}if(_0x549b38[0x0]===0x3&&(!_0x45eefe||_0x549b38[0x1]>_0x45eefe[0x0]&&_0x549b38[0x1]<_0x45eefe[0x3])){_0x263a88[_0x225daa(0x152)]=_0x549b38[0x1];break;}if(_0x549b38[0x0]===0x6&&_0x263a88[_0x225daa(0x152)]<_0x45eefe[0x1]){_0x263a88[_0x225daa(0x152)]=_0x45eefe[0x1],_0x45eefe=_0x549b38;break;}if(_0x45eefe&&_0x263a88[_0x225daa(0x152)]<_0x45eefe[0x2]){_0x263a88['label']=_0x45eefe[0x2],_0x263a88[_0x225daa(0x1a1)][_0x225daa(0x18a)](_0x549b38);break;}if(_0x45eefe[0x2])_0x263a88[_0x225daa(0x1a1)][_0x225daa(0x16a)]();_0x263a88[_0x225daa(0x148)][_0x225daa(0x16a)]();continue;}_0x549b38=_0x4b95dd[_0x225daa(0x150)](_0x47a28f,_0x263a88);}catch(_0x47819e){_0x549b38=[0x6,_0x47819e],_0x6d723d=0x0;}finally{_0x4d4f17=_0x45eefe=0x0;}if(_0x549b38[0x0]&0x5)throw _0x549b38[0x1];return{'value':_0x549b38[0x0]?_0x549b38[0x1]:void 0x0,'done':!![]};}};Object[a13_0x5cc79c(0x16e)](exports,'__esModule',{'value':!![]}),exports[a13_0x5cc79c(0x15d)]=exports['ERRORS']=void 0x0;var Verifiers_1=require(a13_0x5cc79c(0x15e)),Signers_1=require('./Signers'),JWKUtils_1=require('./JWKUtils'),globals_1=require(a13_0x5cc79c(0x197)),Response_1=require(a13_0x5cc79c(0x157)),Identity_1=require(a13_0x5cc79c(0x19c)),Request_1=require(a13_0x5cc79c(0x17d)),Utils_1=require(a13_0x5cc79c(0x19f)),ErrorResponse=__importStar(require(a13_0x5cc79c(0x14b))),Crypto_1=require('./Crypto'),Storage_1=require(a13_0x5cc79c(0x177));exports[a13_0x5cc79c(0x166)]=Object['freeze']({'NO_SIGNING_INFO':'At\x20least\x20one\x20public\x20key\x20must\x20be\x20confirmed\x20with\x20related\x20private\x20key','UNRESOLVED_IDENTITY':'Unresolved\x20identity','NO_PUBLIC_KEY':a13_0x5cc79c(0x194)});var Provider=function(){var _0x39c5c3=a13_0x5cc79c;function _0x405548(){var _0x52c0fb=a13_0x1502,_0x5c0ef3=this;this[_0x52c0fb(0x168)]=new Identity_1[(_0x52c0fb(0x191))](),this[_0x52c0fb(0x18b)]=[],this[_0x52c0fb(0x15b)]=new Crypto_1[(_0x52c0fb(0x17a))](),this[_0x52c0fb(0x156)]=new Storage_1['Storage'](),this[_0x52c0fb(0x14e)]=function(_0x19f7a4){var _0xaf92ce=_0x52c0fb;_0x5c0ef3['storage'][_0xaf92ce(0x14e)](_0x19f7a4);};}return _0x405548[_0x39c5c3(0x180)][_0x39c5c3(0x14c)]=function(_0xf6369e,_0x5a77a1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x40de4c;return __generator(this,function(_0x59e832){var _0x459552=a13_0x1502;switch(_0x59e832['label']){case 0x0:_0x59e832[_0x459552(0x148)][_0x459552(0x18a)]([0x0,0x4,,0x5]);if(!_0x5a77a1)return[0x3,0x1];this[_0x459552(0x168)][_0x459552(0x199)](_0x5a77a1,_0xf6369e);return[0x3,0x3];case 0x1:return[0x4,this[_0x459552(0x168)][_0x459552(0x16d)](_0xf6369e)];case 0x2:_0x59e832[_0x459552(0x185)](),_0x59e832['label']=0x3;case 0x3:return[0x3,0x5];case 0x4:_0x40de4c=_0x59e832[_0x459552(0x185)]();throw _0x40de4c;case 0x5:return[0x2];}});});},_0x405548[_0x39c5c3(0x180)][_0x39c5c3(0x196)]=function(_0x4d190a,_0xe63514,_0x434e94,_0x3fc1e3){var _0x5ad6b8=_0x39c5c3;try{if(_0x434e94){}if(_0x3fc1e3){}if(_0xe63514){}var _0x34d3e0=this['identity'][_0x5ad6b8(0x15c)]();for(var _0xa1ac0a=0x0,_0x2399be=_0x34d3e0;_0xa1ac0a<_0x2399be[_0x5ad6b8(0x173)];_0xa1ac0a++){var _0xf6e2df=_0x2399be[_0xa1ac0a],_0x4c4f60={'key':_0xf6e2df[_0x5ad6b8(0x198)],'kid':_0xf6e2df['id'],'use':_0x5ad6b8(0x149),'kty':globals_1['KTYS'][_0xf6e2df['kty']],'alg':globals_1['ALGORITHMS'][_0xf6e2df['alg']],'format':_0xf6e2df[_0x5ad6b8(0x164)],'isPrivate':![]};for(var _0x2fabaf in globals_1[_0x5ad6b8(0x183)]){var _0x23d2ea={'key':_0x4d190a,'kid':_0xf6e2df['id'],'use':'sig','kty':globals_1['KTYS'][_0xf6e2df[_0x5ad6b8(0x14d)]],'alg':globals_1[_0x5ad6b8(0x17e)][_0xf6e2df['alg']],'format':globals_1[_0x5ad6b8(0x183)][_0x2fabaf],'isPrivate':!![]},_0x10e984=void 0x0,_0x256fc4=void 0x0,_0x2fd389=void 0x0,_0x2ade55=void 0x0;try{switch(_0xf6e2df[_0x5ad6b8(0x14d)]){case globals_1[_0x5ad6b8(0x18d)][_0x5ad6b8(0x153)]:{_0x10e984=JWKUtils_1[_0x5ad6b8(0x169)][_0x5ad6b8(0x186)](_0x23d2ea),_0x256fc4=JWKUtils_1[_0x5ad6b8(0x169)][_0x5ad6b8(0x186)](_0x4c4f60),_0x2fd389=new Signers_1[(_0x5ad6b8(0x174))](),_0x2ade55=new Verifiers_1[(_0x5ad6b8(0x19e))]();break;};case globals_1[_0x5ad6b8(0x18d)]['EC']:{_0xf6e2df[_0x5ad6b8(0x164)]===globals_1[_0x5ad6b8(0x183)][_0x5ad6b8(0x192)]?(_0x10e984=JWKUtils_1['ECKey'][_0x5ad6b8(0x186)](_0x23d2ea),_0x256fc4=_0xf6e2df[_0x5ad6b8(0x198)],_0x2fd389=new Signers_1[(_0x5ad6b8(0x19a))](),_0x2ade55=new Verifiers_1[(_0x5ad6b8(0x193))]()):(_0x10e984=JWKUtils_1[_0x5ad6b8(0x18c)][_0x5ad6b8(0x186)](_0x23d2ea),_0x256fc4=JWKUtils_1['ECKey'][_0x5ad6b8(0x186)](_0x4c4f60),_0x2fd389=new Signers_1['ECSigner'](),_0x2ade55=new Verifiers_1['ECVerifier']());break;}case globals_1[_0x5ad6b8(0x18d)]['OKP']:{_0x10e984=JWKUtils_1[_0x5ad6b8(0x189)][_0x5ad6b8(0x186)](_0x23d2ea),_0x256fc4=JWKUtils_1[_0x5ad6b8(0x189)][_0x5ad6b8(0x186)](_0x4c4f60),_0x2fd389=new Signers_1[(_0x5ad6b8(0x160))](),_0x2ade55=new Verifiers_1['OKPVerifier']();break;};default:{continue;}}if(Utils_1['checkKeyPair'](_0x10e984,_0x256fc4,_0x2fd389,_0x2ade55,_0xf6e2df[_0x5ad6b8(0x162)]))return this['signing_info_set'][_0x5ad6b8(0x18a)]({'alg':_0xf6e2df['alg'],'kid':_0xf6e2df['id'],'key':_0x4d190a,'format':globals_1[_0x5ad6b8(0x183)][_0x2fabaf]}),_0xf6e2df['id']&&this[_0x5ad6b8(0x15b)][_0x5ad6b8(0x195)](_0x4d190a),_0xf6e2df['id'];}catch(_0x48bca6){continue;}}}throw new Error(exports[_0x5ad6b8(0x166)][_0x5ad6b8(0x179)]);}catch(_0x34f04f){throw _0x34f04f;}},_0x405548['prototype'][_0x39c5c3(0x182)]=function(_0x4ba22c){var _0x5cfe21=_0x39c5c3;try{this[_0x5cfe21(0x18b)]=this[_0x5cfe21(0x18b)][_0x5cfe21(0x15f)](function(_0x16f2bf){var _0x38ab0b=_0x5cfe21;return _0x16f2bf[_0x38ab0b(0x154)]!==_0x4ba22c;});}catch(_0x5b29ef){throw _0x5b29ef;}},_0x405548['prototype']['validateRequest']=function(_0x150623){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3200df){var _0x3977c8=a13_0x1502;try{return[0x2,Request_1[_0x3977c8(0x176)][_0x3977c8(0x165)](_0x150623)];}catch(_0x4fe00f){return[0x2,Promise['reject'](_0x4fe00f)];}return[0x2];});});},_0x405548['prototype']['generateResponse']=function(_0x3a4541,_0x1da774,_0x3d194e){return _0x3d194e===void 0x0&&(_0x3d194e=0x3e8),__awaiter(this,void 0x0,void 0x0,function(){var _0x178747,_0x255030;return __generator(this,function(_0x1825e0){var _0x2b2835=a13_0x1502;switch(_0x1825e0[_0x2b2835(0x152)]){case 0x0:_0x1825e0[_0x2b2835(0x148)]['push']([0x0,0x4,,0x5]);if(!(this['signing_info_set'][_0x2b2835(0x173)]>0x0))return[0x3,0x3];_0x178747=this[_0x2b2835(0x18b)][Math[_0x2b2835(0x16f)](Math[_0x2b2835(0x14a)]()*this['signing_info_set'][_0x2b2835(0x173)])];if(!this[_0x2b2835(0x168)]['isResolved']())return[0x3,0x2];return[0x4,Response_1[_0x2b2835(0x14f)][_0x2b2835(0x17b)](_0x3a4541,_0x178747,this[_0x2b2835(0x168)],_0x3d194e,this['crypto'],_0x1da774,this[_0x2b2835(0x156)])];case 0x1:return[0x2,_0x1825e0[_0x2b2835(0x185)]()];case 0x2:return[0x2,Promise[_0x2b2835(0x190)](new Error(exports[_0x2b2835(0x166)]['UNRESOLVED_IDENTITY']))];case 0x3:return[0x2,Promise[_0x2b2835(0x190)](new Error(exports[_0x2b2835(0x166)]['NO_SIGNING_INFO']))];case 0x4:_0x255030=_0x1825e0[_0x2b2835(0x185)]();return[0x2,Promise[_0x2b2835(0x190)](_0x255030)];case 0x5:return[0x2];}});});},_0x405548[_0x39c5c3(0x180)][_0x39c5c3(0x18e)]=function(_0x39ffa9){try{return ErrorResponse['getBase64URLEncodedError'](_0x39ffa9);}catch(_0xba64d4){throw _0xba64d4;}},_0x405548;}();exports['Provider']=Provider;